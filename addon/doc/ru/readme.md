# MathCAT #

* Автор: Neil Soiffer
* Совместимость с NVDA: 2018.1 или выше (не проверялось в более ранних
  версиях)
* Загрузить [стабильную версию][1]

MathCat предназначен для замены в конечном итоге MathPlayer, поскольку
MathPlayer больше не поддерживается. MathCat генерирует речь и Брайль с
помощью MathML. Речь для math, созданная MathCat, дополнена просодией, чтобы
она звучала более естественно. Навигация по речи может осуществляться в трех
режимах с использованием тех же команд, что и в MathPlayer. Кроме того,
навигационный узел отображается на брайлевском дисплее. Поддерживаются
технические решения Nemeth и UEB.

В MathCat есть несколько параметров конфигурации, которые управляют речью,
навигацией и Брайлем.  Многие из них можно настроить в диалоге настроек
MathCat (находится в меню настроек NVDA).  Дополнительную информацию об этих
настройках смотрите в [документации по
MathCat](https://nsoiffer.github.io/MathCAT/users.html).  Документация
содержит ссылку на
[таблицу](https://nsoiffer.github.io/MathCAT/nav-commands.html), в которой
перечислены все навигационные команды в MathCat.

Примечание: MathCat - это общая библиотека для генерации речи и шрифта
Брайля на основе MathML. Она используется в других проектах AT, помимо
NVDA. Информацию о проекте MathCat в целом смотрите на главной [странице
документации MathCat](https://nsoiffer.github.io/MathCAT).


Кто должен использовать MathCat:

* Те, кому нужен высококачественный шрифт Брайля Nemeth (Nemeth от
  MathPlayer основан на поколении Nemeth от liblouis, в котором есть ряд
  существенных ошибок, которые технически трудно исправить).
* Те, кому нужен технический шрифт Брайля UEB, CMU
  (испанский/португальский), немецкий LaTeX, AsciiMath или вьетнамский шрифт
  Брайля
* Те, кто хочет опробовать новейшие технологии и готов помочь, сообщая об
  ошибках
* Те, кто использует Eloquence в качестве голоса

Кому НЕ следует использовать MathCat:

* Любому, кто использует MathPlayer на языке, который еще не поддерживается
  MathCat (существуют переводы для китайского (традиционного), испанского,
  индонезийского и вьетнамского языков; переводы появятся в будущем), и кому
  не нравится речь на одном из поддерживаемых языков.
* Любому, кто предпочитает Access8Math для MathPlayer (для речи или других
  функций)

Правила MathCat для речи еще не так обширны, как правила MathPlayer - это
может быть еще одной причиной придерживаться MathPlayer. MathCat
используется в качестве испытательного стенда для идей для MathML 4, которые
позволяют авторам выражать свои намерения так, чтобы двусмысленные
обозначения можно было произносить правильно, а не угадывать. Я воздержался
от добавления слишком большого количества правил, поскольку архитектура
MathCat сосредоточена на использовании и выводе намерений автора, и они еще
не полностью определены.

## Журнал обновлений MathCat

### Версия 0.6.3

* Все языковые файлы и файлы правил шрифта Брайля заархивированы по
  каталогам и распаковываются по требованию.

	* В настоящее время это экономит ~5 Мб при распаковке Rules.zip и будет
	  экономить еще больше по мере добавления новых языков и кодов Брайля.
	* Это делается в рамках подготовки к внедрению MathCat в NVDA 2024.3

* Добавлена новая настройка "DecimalSeparator`.

	* Значением по умолчанию является "Auto", другими значениями являются ".",
	  "," и "Custom". Первые три значения задают "DecimalSeparators" и
	  `BlockSeparators`.
	* `Автоматически` устанавливает эти настройки на основе значения параметра
	  `Язык`. Для некоторых языков, таких как испанский, в одних странах
	  используется `,`, а в других - `.`. В этом случае лучше всего указать
	  язык, в котором также указан код страны (например, `es-es` или `es-mx`),
	  чтобы убедиться, что используется правильное значение.

* Добавлен шведский язык в число поддерживаемых языков.
* Добавлено больше символов Unicode, чтобы включить в стандарт Unicode как
  все символы Unicode, помеченные как "Sm", так и те, которые содержат
  mathclass (за исключением классов Alphabetic и Glyph).
* После изменения способа работы префиксов в предыдущей версии я забыл
  изменить "MathRate" и "PauseFactor" на числа, а не на строки.
* Исправлена ошибка в правилах Брайля (пропущенное изменение по сравнению с
  предыдущими версиями), из-за которой при поиске значения определения
  должен был быть указан третий аргумент, указывающий на необходимость
  поиска в файлах _Braille_ `definitions.yaml`, а не в речевых файлах.
* Исправлено использование "definitions.yaml`.
* Исправлены некоторые ошибки в очистке MathML для десятичных разделителей
  ",".
* Обнаружил ошибку в выделении шрифтом Брайля, когда ничего не выделяется
  (возможно, этого никогда не происходит, поэтому я не видел этого на
  практике?)
* Исправлен режим "Описания", чтобы он работал - он по-прежнему очень
  минимален и, вероятно, пока бесполезен
* Исправлена минимальная поддерживаемая версия

### Версия 0.5.6
* Добавлено копировать как... в диалоговое окно MathCat (на панели
  "Навигация").
* Исправлена ошибка, из-за которой язык возвращался к английскому при смене
  стиля речи.
* Исправлена ошибка с навигацией и Брайлем
* Исправлены некоторые проблемы с интервалом между символами Asciimath.
* Улучшено распознавание химического состава
* Обновлен MathCat до новой спецификации химии BANA Nemeth (по-прежнему не
  обработаны изменения стиля/шрифта только в одной строке и в специальном
  регистре)
* Исправлена ошибка, возникавшая при использовании в числах цифр, отличных
  от ASCII (например, выделенных жирным шрифтом)
* Не использовать курсивные указатели в кодах Брайля, когда используются
  математические буквенно-цифровые символы, выделенные курсивом
* Некоторые другие мелкие исправления ошибок, о которых пользователи не
  сообщали

### Версия 0.5.0
* Добавлен немецкий шрифт Брайля LaTeX. В отличие от других шрифтов Брайля,
  этот код генерирует символы ASCII и использует текущую таблицу вывода
  шрифта Брайля для перевода символов в шрифт Брайля.
* Добавлен (экспериментально) код азбуки Брайля AsciiMath. Как и в коде
  Брайлевского шрифта LaTeX, он генерирует символы ASCII и использует
  текущую таблицу вывода Брайля для перевода символов в шрифт Брайля.
* Добавлена опция "CopyAs", которая поддерживает копирование в форматах
  MathML, LaTeX или AsciiMath с использованием cntl +C при фокусировке на
  MathML (как и раньше). Копируется текущий узел в фокусе. Примечание: это
  указано только в настройках.файл yaml и не отображается (пока) в диалоге
  настроек MathCat.

### Версия 0.4.2
* Исправлено переключение языка при изменении голоса и выборе языка MathCat
  в качестве "Автоматического"
* Добавлены дополнительные проверки на наличие нарушений чтения, чтобы
  улучшить чтение, когда оно не настроено для слепых
* Nemeth: исправлена ошибка с "~", когда она не является частью mrow
* UEB: добавление символов, исправление интервала "~" в префиксе if,
  исправление xor,
* Очистка MathML для гласных с ударением (в основном для вьетнамцев)
* Кардинальная переработка предпочтительного кода чтения / обновления с
  большим ускорением - добавлен параметр "CheckRuleFiles" для контроля того,
  какие файлы проверяются на наличие обновлений
* Добавлены два новых вызова интерфейса - позволяет устанавливать
  местоположение навигатора с помощью Брайлевского курсора (пока не является
  частью дополнения MathCat)

### Версия 0.3.11
* Обновлен до python 3.11 и проверен на работоспособность с NVDA 2024.1
* Исправлены ошибки во вьетнамском шрифте Брайля, а также в речи, в основном
  по химии.
* Исправлены ошибки в наборе шрифта Брайля, когда код шрифта Брайля и
  зависимый язык не совпадают (в частности, вьетнамский шрифт Брайля и
  вьетнамская речь)
* Исправлена ошибка с пробелами в HTML внутри токенов
* Улучшено распознавание римских цифр


### Версия 0.3.9
* Добавлен традиционный китайский перевод (спасибо Hon-Jang Yang)
* Исправлена ошибка с переходом к основанию скриптового выражения,
  содержащего круглые скобки
* Существенно изменён способ обработки пробелов. В основном это влияет на
  вывод по Брайлю (пробелы и обнаружение пропусков).
* Улучшено распознавание химии
* UEB исправляет ошибки, связанные с добавлением примеров по химии
* UEB исправляет ошибки при добавлении вспомогательных скобок в некоторых
  случаях


### Версия 0.3.8

Брайль:

* Диалог был интернационализирован для нескольких языков (большое спасибо
  переводчикам!)
* Первоначальное внедрение CMU - кода Брайля, используемого в испаноязычных
  и португалоязычных странах
* Исправлены некоторые ошибки в UEB и добавлены некоторые символы для UEB
* Значительные улучшения во вьетнамском шрифте Брайля

Другие исправления:

* Изменён ползунок диалога относительной скорости на максимальное значение
  100% (теперь можно устанавливать только более низкие скорости). Кроме
  того, добавлены размеры шага, чтобы было проще значительно повышать /
  понижать скорость.
* Исправлена ошибка eSpeak, из-за которой иногда прерывалась речь при
  изменении относительной скорости
* Улучшения во вьетнамской речи
* Исправлена ошибка, из-за которой голоса OneCore произносили "a"
* Исправлены некоторые ошибки навигации, когда значение `AutoZoomOut` было
  ложным (не по умолчанию)
* Исправлены изменения, связанные с изменением языка и некоторыми другими
  изменениями в диалоге, чтобы они вступали в силу немедленно после нажатия
  кнопки "Применить" или "ОК".
* Добавлена опция "Использовать язык озвучки", чтобы MathCat сразу говорил
  на нужном языке (если есть перевод).
* Несколько улучшений для очистки некачественного кода MathML

### Версия 0.3.3
В этом выпуске исправлен ряд ошибок. Основными новыми функциями и
исправлениями ошибок являются:

* Добавлен перевод на испанский (спасибо Noelia Ruiz и María Allo Roldán)
* Изменена навигация таким образом, что она начинает увеличиваться на один
  уровень
* Добавлены клавиши cntrl+alt+стрелка для навигации по табличным
  структурам. Эти клавиши должны быть более запоминающимися, поскольку они
  используются для навигации по таблицам в NVDA.
* Устранена ошибка NVDA для голосовых сообщений eSpeak, из-за которой они
  замедлялись, когда относительная математическая скорость была установлена
  ниже скорости текстовой речи.
* Мы решили проблему с голосами OneCore, чтобы они произносили длинный звук
  'a'.

There are lots of small tweaks to the speech and some bug fixes for both
Nemeth and UEB.

Note: there is now an option to get Vietnam's braille standard as braille
output. This is still a work in progress and is too buggy to be used other
than for testing. I expect the next MathCAT release will contain a reliable
implementation.

### Версия 0.2.5
* Больше улучшений химии
* Fixes for Nemeth:

	* Добавлены правила "пропуска"
	* Добавлены некоторые правила для индикаторов английского языка
	* Добавлено больше случаев, когда требуется многоцелевой индикатор
	* Исправления, связанные с Nemeth и пунктуацией

### Версия 0.2
* Множество исправлений ошибок
* Улучшения в речи
* Предпочтительная настройка для управления длительностью паузы (работает с
  изменениями относительной скорости речи для математики)
* Поддержка распознавания химических знаков и правильного их произношения
* Переводы на индонезийский и вьетнамский языки

[[!tag dev stable]]

[1]: https://www.nvaccess.org/addonStore/legacy?file=mathcat
